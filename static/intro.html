<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" /> 
    <title>Calculate compounding interest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="chartist.min.css">

    <script>
      var chartData = [];
      function initElm() {
        var node = document.getElementById('main-app');
        var app = Elm.Main.embed(node, window.location.href.concat("=").split('=')[1]);
        app.ports.chartist.subscribe(function(data) {
          chartData = data;
          initPlot();
        });
      }
      function initPlot() {
        const shortMonthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        new Chartist.Line('#chart', {
          series: [
            {
              name: 'series-1',
              data: chartData.map(p => ({x:p[0], y:p[1]}))
            }
          ]
        }, {
          axisX: {
            type: Chartist.FixedScaleAxis,
            divisor: 4,
            labelInterpolationFnc: function(value) {
              const date = new Date(value);
              return shortMonthNames[date.getMonth()]+date.getFullYear().toString().slice(2);
            }
          },
          axisY: {
            labelInterpolationFnc: function(value) {
              if(value.toString().length < 6) {
                return value;
              } else {
                var retVal = "";
                var significant = 0;
                while(retVal.length < 5) {
                  retVal = value.toExponential(significant++);
                }
                return retVal;
              }
            }
          }
        });
      }
    </script>

    <script async src="elm.js" onload="initElm()"></script>
    <script async src="chartist.min.js" onload="initPlot()"></script>

    <style>
